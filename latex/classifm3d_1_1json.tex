\hypertarget{classifm3d_1_1json}{}\doxysection{ifm3d\+::json Class Reference}
\label{classifm3d_1_1json}\index{ifm3d::json@{ifm3d::json}}


{\ttfamily \#include $<$ifm3d/device/json.\+hpp$>$}



\doxysubsection{Detailed Description}
\hypertarget{classifm3d_1_1json_documentation}{}\doxysubsection{Documentation}\label{classifm3d_1_1json_documentation}
ifm3d provides a copy of nlohmann\+::json, please see it\textquotesingle{}s documentation for detailed usage\+: \href{https://json.nlohmann.me/}{\texttt{ https\+://json.\+nlohmann.\+me/}}\hypertarget{classifm3d_1_1json_converter}{}\doxysubsection{Using ifm3d\+::json together with nlohmann\+::json}\label{classifm3d_1_1json_converter}
Working with both nlohmann\+::json and \mbox{\hyperlink{classifm3d_1_1json}{ifm3d\+::json}} together doesn\textquotesingle{}t require any specific setup, however the types are not automatically convertible, so to get a nlohmann\+::json instance from a \mbox{\hyperlink{classifm3d_1_1json}{ifm3d\+::json}} instance one has to convert the json to a string and then parse it again.


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{classifm3d_1_1json}{ifm3d::json}} j1 = ...;}
\DoxyCodeLine{nlohmann::json j2 = nlohmann::json::parse(j1.dump(0));}
\end{DoxyCode}


To ease this conversion ifm3d provides a custom converter which can be used by defining {\ttfamily I\+F\+M3\+D\+\_\+\+J\+S\+O\+N\+\_\+\+N\+L\+O\+H\+M\+A\+N\+N\+\_\+\+C\+O\+M\+P\+AT} before including \mbox{\hyperlink{classifm3d_1_1json}{ifm3d\+::json}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <nlohmann/json.hpp>} \textcolor{comment}{// nlohmann json needs to be included before}}
\DoxyCodeLine{                             \textcolor{comment}{// any ifm3d include.}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define IFM3D\_JSON\_NLOHMANN\_COMPAT // enable the nlohmann json converter}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <ifm3d/device/json.hpp>}}
\end{DoxyCode}


After this the values can just be assigned and will be converted automatically


\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{classifm3d_1_1json}{ifm3d::json}} j1 = ...;}
\DoxyCodeLine{nlohman::json j2 = j1;}
\end{DoxyCode}
\hypertarget{classifm3d_1_1json_udl}{}\doxysubsubsection{User Defined Literals}\label{classifm3d_1_1json_udl}
Using the user-\/defined string literals {\ttfamily operator\char`\"{}\char`\"{}\+\_\+json} and {\ttfamily operator\char`\"{}\char`\"{}\+\_\+json\+\_\+pointer}


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using namespace }ifm3d::literals;}
\DoxyCodeLine{\mbox{\hyperlink{classifm3d_1_1json}{ifm3d::json}} j = \textcolor{stringliteral}{"[1,2,3]"}\_json;}
\end{DoxyCode}


ambiguity errors will occur since by default nlohmann\+::json currently places it\textquotesingle{}s {\ttfamily operator\char`\"{}\char`\"{}\+\_\+json} and {\ttfamily operator\char`\"{}\char`\"{}\+\_\+json\+\_\+pointer} into the global namespace. To solve this nlohman\+::json can be configured to place them into the nlohmann namespace by defining 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#define JSON\_USE\_GLOBAL\_UDLS 0}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <nlohmann/json.hpp>}}
\end{DoxyCode}
 before including it (see the \href{https://json.nlohmann.me/api/macros/json_use_global_udls/}{\texttt{ nlohmann\+::json doc}} for more details).

After this the correct namespaces can always be brought into scope when needed, but some care needs to be given to never bring both into the same scope, e.\+g. the following {\bfseries{W\+I\+LL N\+OT W\+O\+RK}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{// Bring both UDLs into scope}}
\DoxyCodeLine{\textcolor{keyword}{using namespace }nlohmann::json\_literals;}
\DoxyCodeLine{\textcolor{keyword}{using namespace }ifm3d::json\_literals;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int} main()}
\DoxyCodeLine{\{}
\DoxyCodeLine{    \textcolor{comment}{// auto j = "42"\_json; // This line would fail to compile,}}
\DoxyCodeLine{                           \textcolor{comment}{// because \_json is ambigous}}
\DoxyCodeLine{}
\DoxyCodeLine{    std::cout << j << std::endl;}
\DoxyCodeLine{\}}
\end{DoxyCode}


To counteract this, the namspaces can be brought into smaller scopes, the following will all be valid


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void} json\_nl()}
\DoxyCodeLine{\{}
\DoxyCodeLine{   \textcolor{keyword}{using namespace }nlohmann::literals;}
\DoxyCodeLine{   \textcolor{keyword}{auto} nl = \textcolor{stringliteral}{"\{\}"}\_json;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} json\_ifm()}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \textcolor{keyword}{using namespace }ifm3d::literals;}
\DoxyCodeLine{  \textcolor{keyword}{auto} ifm = \textcolor{stringliteral}{"\{\}"}\_json;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} json\_both()}
\DoxyCodeLine{\{}
\DoxyCodeLine{  nlohmann::json nl;}
\DoxyCodeLine{  \mbox{\hyperlink{classifm3d_1_1json}{ifm3d::json}} ifm;}
\DoxyCodeLine{}
\DoxyCodeLine{  \{}
\DoxyCodeLine{    \textcolor{keyword}{using namespace }nlohmann::literals;}
\DoxyCodeLine{    nl = \textcolor{stringliteral}{"\{\}"}\_json;}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{  \{}
\DoxyCodeLine{    \textcolor{keyword}{using namespace }ifm3d::literals;}
\DoxyCodeLine{    ifm = \textcolor{stringliteral}{"\{\}"}\_json;}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\end{DoxyCode}
 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
ifm3d/device/json.\+hpp\end{DoxyCompactItemize}
