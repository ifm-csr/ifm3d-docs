\hypertarget{classifm3d_1_1FrameGrabber}{}\doxysection{ifm3d\+::Frame\+Grabber Class Reference}
\label{classifm3d_1_1FrameGrabber}\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}


{\ttfamily \#include $<$ifm3d/fg/frame\+\_\+grabber.\+h$>$}

\doxysubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a41a544aec91f9490e5df655ef0793a42}\label{classifm3d_1_1FrameGrabber_a41a544aec91f9490e5df655ef0793a42}} 
using {\bfseries Ptr} = std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classifm3d_1_1FrameGrabber}{Frame\+Grabber}} $>$
\item 
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a209971f7d9fc910525cf0bfa858dc947}\label{classifm3d_1_1FrameGrabber_a209971f7d9fc910525cf0bfa858dc947}} 
using {\bfseries New\+Frame\+Callback} = std\+::function$<$ void(Frame\+::\+Ptr)$>$
\item 
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a8effa331c8998c182be1a1b95bf5f3ab}\label{classifm3d_1_1FrameGrabber_a8effa331c8998c182be1a1b95bf5f3ab}} 
using {\bfseries Async\+Error\+Callback} = std\+::function$<$ void(int, const std\+::string \&)$>$
\item 
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a4dced90cd3ec64faef3026d9e2709470}\label{classifm3d_1_1FrameGrabber_a4dced90cd3ec64faef3026d9e2709470}} 
using {\bfseries Async\+Notification\+Callback} = std\+::function$<$ void(const std\+::string \&, const std\+::string \&)$>$
\item 
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a0a81a3701da57be978361c2214fc96db}\label{classifm3d_1_1FrameGrabber_a0a81a3701da57be978361c2214fc96db}} 
using {\bfseries Buffer\+List} = std\+::vector$<$ std\+::variant$<$ std\+::uint64\+\_\+t, int, ifm3d\+::buffer\+\_\+id $>$ $>$
\item 
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a0b002b1b97d8b758c5c68bda77733f32}\label{classifm3d_1_1FrameGrabber_a0b002b1b97d8b758c5c68bda77733f32}} 
using {\bfseries Error\+Callback} = std\+::function$<$ void(const \mbox{\hyperlink{classifm3d_1_1Error}{ifm3d\+::\+Error}} \&)$>$
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classifm3d_1_1FrameGrabber_a7f4419ec5b42ba076b92e5a0540946fd}{Frame\+Grabber}} (ifm3d\+::\+Device\+::\+Ptr cam, std\+::optional$<$ std\+::uint16\+\_\+t $>$ pcic\+\_\+port=std\+::nullopt)
\item 
virtual \mbox{\hyperlink{classifm3d_1_1FrameGrabber_aad0462fed9a5fc30e35f100af2217826}{$\sim$\+Frame\+Grabber}} ()
\item 
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_abf590f2260f4b7cddfa573a63706c16b}\label{classifm3d_1_1FrameGrabber_abf590f2260f4b7cddfa573a63706c16b}} 
{\bfseries Frame\+Grabber} (\mbox{\hyperlink{classifm3d_1_1FrameGrabber}{Frame\+Grabber}} \&\&)=delete
\item 
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a37e8d692b7cb118b374cb98fad80f696}\label{classifm3d_1_1FrameGrabber_a37e8d692b7cb118b374cb98fad80f696}} 
\mbox{\hyperlink{classifm3d_1_1FrameGrabber}{Frame\+Grabber}} \& {\bfseries operator=} (\mbox{\hyperlink{classifm3d_1_1FrameGrabber}{Frame\+Grabber}} \&\&)=delete
\item 
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_af7e0394c99854975d87b44e4161d5c32}\label{classifm3d_1_1FrameGrabber_af7e0394c99854975d87b44e4161d5c32}} 
{\bfseries Frame\+Grabber} (\mbox{\hyperlink{classifm3d_1_1FrameGrabber}{Frame\+Grabber}} \&)=delete
\item 
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_afa616a11d0998001183522e5df9db5a4}\label{classifm3d_1_1FrameGrabber_afa616a11d0998001183522e5df9db5a4}} 
\mbox{\hyperlink{classifm3d_1_1FrameGrabber}{Frame\+Grabber}} \& {\bfseries operator=} (const \mbox{\hyperlink{classifm3d_1_1FrameGrabber}{Frame\+Grabber}} \&)=delete
\item 
std\+::shared\+\_\+future$<$ void $>$ \mbox{\hyperlink{classifm3d_1_1FrameGrabber_a0bcaaf3a21897fadbcd4fe267aa139d9}{S\+W\+Trigger}} ()
\item 
void \mbox{\hyperlink{classifm3d_1_1FrameGrabber_aad76d616c98cfde74adedb6de34d1793}{On\+New\+Frame}} (New\+Frame\+Callback callback=nullptr)
\item 
bool \mbox{\hyperlink{classifm3d_1_1FrameGrabber_adffefb711cacd2730991af483de3cc73}{Start}} (const Buffer\+List \&buffers, const std\+::optional$<$ \mbox{\hyperlink{classifm3d_1_1json}{json}} $>$ \&pcic\+Format=std\+::nullopt)
\item 
std\+::shared\+\_\+future$<$ void $>$ \mbox{\hyperlink{classifm3d_1_1FrameGrabber_a6a12c26b81bd4cd01291f649ac7ce844}{Stop}} ()
\item 
bool \mbox{\hyperlink{classifm3d_1_1FrameGrabber_a41863acd226d087671594f47af3b0e32}{Is\+Running}} ()
\item 
std\+::shared\+\_\+future$<$ Frame\+::\+Ptr $>$ \mbox{\hyperlink{classifm3d_1_1FrameGrabber_a8911d6f0a032c9c072f812194ec9bb85}{Wait\+For\+Frame}} ()
\item 
void \mbox{\hyperlink{classifm3d_1_1FrameGrabber_ad9b7752f418e4f937e31808b4c20c226}{Set\+Organizer}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classifm3d_1_1Organizer}{Organizer}} $>$ organizer)
\item 
void \mbox{\hyperlink{classifm3d_1_1FrameGrabber_a420ba8b039d15d68e09650b9531a75e1}{On\+Async\+Error}} (Async\+Error\+Callback callback=nullptr)
\item 
void \mbox{\hyperlink{classifm3d_1_1FrameGrabber_aa05b4b418fed47a19e63af35eff3fd37}{On\+Async\+Notification}} (Async\+Notification\+Callback callback=nullptr)
\item 
void \mbox{\hyperlink{classifm3d_1_1FrameGrabber_ab45396f5e290ede681cb1639a9bf9060}{On\+Error}} (Error\+Callback callback=nullptr)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implements a T\+CP \mbox{\hyperlink{classifm3d_1_1FrameGrabber}{Frame\+Grabber}} connected to the device passed to its ctor 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a7f4419ec5b42ba076b92e5a0540946fd}\label{classifm3d_1_1FrameGrabber_a7f4419ec5b42ba076b92e5a0540946fd}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!FrameGrabber@{FrameGrabber}}
\index{FrameGrabber@{FrameGrabber}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{FrameGrabber()}{FrameGrabber()}}
{\footnotesize\ttfamily ifm3d\+::\+Frame\+Grabber\+::\+Frame\+Grabber (\begin{DoxyParamCaption}\item[{ifm3d\+::\+Device\+::\+Ptr}]{cam,  }\item[{std\+::optional$<$ std\+::uint16\+\_\+t $>$}]{pcic\+\_\+port = {\ttfamily std\+:\+:nullopt} }\end{DoxyParamCaption})}

Stores a reference to the passed in \mbox{\hyperlink{classifm3d_1_1Device}{Device}} shared pointer


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cam} & The \mbox{\hyperlink{classifm3d_1_1Device}{Device}} instance to grab frames from \\
\hline
\mbox{\texttt{ in}}  & {\em pcic\+\_\+port} & T\+CP port for the pcic connection \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_aad0462fed9a5fc30e35f100af2217826}\label{classifm3d_1_1FrameGrabber_aad0462fed9a5fc30e35f100af2217826}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!````~FrameGrabber@{$\sim$FrameGrabber}}
\index{````~FrameGrabber@{$\sim$FrameGrabber}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{$\sim$FrameGrabber()}{~FrameGrabber()}}
{\footnotesize\ttfamily virtual ifm3d\+::\+Frame\+Grabber\+::$\sim$\+Frame\+Grabber (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Cleans up resources held by the framegrabbing thread object and blocks until the operating system thread stops. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a41863acd226d087671594f47af3b0e32}\label{classifm3d_1_1FrameGrabber_a41863acd226d087671594f47af3b0e32}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!IsRunning@{IsRunning}}
\index{IsRunning@{IsRunning}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{IsRunning()}{IsRunning()}}
{\footnotesize\ttfamily bool ifm3d\+::\+Frame\+Grabber\+::\+Is\+Running (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Returns true if the worker thread is currently running \mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a420ba8b039d15d68e09650b9531a75e1}\label{classifm3d_1_1FrameGrabber_a420ba8b039d15d68e09650b9531a75e1}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!OnAsyncError@{OnAsyncError}}
\index{OnAsyncError@{OnAsyncError}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{OnAsyncError()}{OnAsyncError()}}
{\footnotesize\ttfamily void ifm3d\+::\+Frame\+Grabber\+::\+On\+Async\+Error (\begin{DoxyParamCaption}\item[{Async\+Error\+Callback}]{callback = {\ttfamily nullptr} }\end{DoxyParamCaption})}

This function will enable the async error messages on device. The callback will be executed whenever a async error are avaliable. It receives a error code and error string to the received async error as an argument. \mbox{\Hypertarget{classifm3d_1_1FrameGrabber_aa05b4b418fed47a19e63af35eff3fd37}\label{classifm3d_1_1FrameGrabber_aa05b4b418fed47a19e63af35eff3fd37}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!OnAsyncNotification@{OnAsyncNotification}}
\index{OnAsyncNotification@{OnAsyncNotification}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{OnAsyncNotification()}{OnAsyncNotification()}}
{\footnotesize\ttfamily void ifm3d\+::\+Frame\+Grabber\+::\+On\+Async\+Notification (\begin{DoxyParamCaption}\item[{Async\+Notification\+Callback}]{callback = {\ttfamily nullptr} }\end{DoxyParamCaption})}

This function will enable the async notifications on device. The callback will be executed whenever a async notification is avaliable. It receives a message id and payload string \mbox{\Hypertarget{classifm3d_1_1FrameGrabber_ab45396f5e290ede681cb1639a9bf9060}\label{classifm3d_1_1FrameGrabber_ab45396f5e290ede681cb1639a9bf9060}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!OnError@{OnError}}
\index{OnError@{OnError}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{OnError()}{OnError()}}
{\footnotesize\ttfamily void ifm3d\+::\+Frame\+Grabber\+::\+On\+Error (\begin{DoxyParamCaption}\item[{Error\+Callback}]{callback = {\ttfamily nullptr} }\end{DoxyParamCaption})}

The callback will be executed whenever an error condition occur while grabbing the data from device. \mbox{\Hypertarget{classifm3d_1_1FrameGrabber_aad76d616c98cfde74adedb6de34d1793}\label{classifm3d_1_1FrameGrabber_aad76d616c98cfde74adedb6de34d1793}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!OnNewFrame@{OnNewFrame}}
\index{OnNewFrame@{OnNewFrame}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{OnNewFrame()}{OnNewFrame()}}
{\footnotesize\ttfamily void ifm3d\+::\+Frame\+Grabber\+::\+On\+New\+Frame (\begin{DoxyParamCaption}\item[{New\+Frame\+Callback}]{callback = {\ttfamily nullptr} }\end{DoxyParamCaption})}

The callback will be executed whenever a new frame is available. It receives a Frame\+::\+Ptr to the received frame as an argument. \mbox{\Hypertarget{classifm3d_1_1FrameGrabber_ad9b7752f418e4f937e31808b4c20c226}\label{classifm3d_1_1FrameGrabber_ad9b7752f418e4f937e31808b4c20c226}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!SetOrganizer@{SetOrganizer}}
\index{SetOrganizer@{SetOrganizer}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{SetOrganizer()}{SetOrganizer()}}
{\footnotesize\ttfamily void ifm3d\+::\+Frame\+Grabber\+::\+Set\+Organizer (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classifm3d_1_1Organizer}{Organizer}} $>$}]{organizer }\end{DoxyParamCaption})}

This allows to override the \mbox{\hyperlink{classifm3d_1_1Organizer}{Organizer}} which is used for extracting the data from the raw P\+C\+IC stream.


\begin{DoxyParams}{Parameters}
{\em organizer} & The new organizer to be used \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classifm3d_1_1FrameGrabber_adffefb711cacd2730991af483de3cc73}\label{classifm3d_1_1FrameGrabber_adffefb711cacd2730991af483de3cc73}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!Start@{Start}}
\index{Start@{Start}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{Start()}{Start()}}
{\footnotesize\ttfamily bool ifm3d\+::\+Frame\+Grabber\+::\+Start (\begin{DoxyParamCaption}\item[{const Buffer\+List \&}]{buffers,  }\item[{const std\+::optional$<$ \mbox{\hyperlink{classifm3d_1_1json}{json}} $>$ \&}]{pcic\+Format = {\ttfamily std\+:\+:nullopt} }\end{DoxyParamCaption})}

Starts the worker thread for streaming in pixel data from the device


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em buffers} & set of buffer\+\_\+ids for receiving, passing in an empty set will received all available images. The buffer\+\_\+ids are specific to the current \mbox{\hyperlink{classifm3d_1_1Organizer}{Organizer}}. See buffer\+\_\+id for a list of buffer\+\_\+ids available with the default \mbox{\hyperlink{classifm3d_1_1Organizer}{Organizer}}\\
\hline
\mbox{\texttt{ in}}  & {\em pcic\+Format} & allows to manually set a P\+C\+IC schema for asynchronous results. See ifm3d\+::make\+\_\+schema for generation logic of the default pcic\+Format. Manually setting the pcic\+Format should rarely be needed and most usecases should be covered by the default generated pcic\+Format.\\
\hline
\end{DoxyParams}
Note\+: The \mbox{\hyperlink{classifm3d_1_1FrameGrabber}{Frame\+Grabber}} is relying on some specific formatting rules, if they are missing from the schema the \mbox{\hyperlink{classifm3d_1_1FrameGrabber}{Frame\+Grabber}} will not be able to extract the image data. \mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a6a12c26b81bd4cd01291f649ac7ce844}\label{classifm3d_1_1FrameGrabber_a6a12c26b81bd4cd01291f649ac7ce844}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!Stop@{Stop}}
\index{Stop@{Stop}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{Stop()}{Stop()}}
{\footnotesize\ttfamily std\+::shared\+\_\+future$<$void$>$ ifm3d\+::\+Frame\+Grabber\+::\+Stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Stops the worker thread for streaming in pixel data from the device

Returns a future which will resolve when framegrabber stops. \mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a0bcaaf3a21897fadbcd4fe267aa139d9}\label{classifm3d_1_1FrameGrabber_a0bcaaf3a21897fadbcd4fe267aa139d9}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!SWTrigger@{SWTrigger}}
\index{SWTrigger@{SWTrigger}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{SWTrigger()}{SWTrigger()}}
{\footnotesize\ttfamily std\+::shared\+\_\+future$<$void$>$ ifm3d\+::\+Frame\+Grabber\+::\+S\+W\+Trigger (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Triggers the device for image acquisition

You should be sure to set the {\ttfamily Trigger\+Mode} for your application to {\ttfamily SW} in order for this to be effective. This function simply does the triggering, data are still received asynchronously via {\ttfamily \mbox{\hyperlink{classifm3d_1_1FrameGrabber_a8911d6f0a032c9c072f812194ec9bb85}{Wait\+For\+Frame()}}}.

Calling this function when the device is not in {\ttfamily SW} trigger mode or on a device that does not support software-\/trigger should result in a N\+O\+OP and no error will be returned (no exceptions thrown). However, we do not recommend calling this function in a tight framegrabbing loop when you know it is not needed. The \char`\"{}cost\char`\"{} of the N\+O\+OP is undefined and incurring it is not recommended. \mbox{\Hypertarget{classifm3d_1_1FrameGrabber_a8911d6f0a032c9c072f812194ec9bb85}\label{classifm3d_1_1FrameGrabber_a8911d6f0a032c9c072f812194ec9bb85}} 
\index{ifm3d::FrameGrabber@{ifm3d::FrameGrabber}!WaitForFrame@{WaitForFrame}}
\index{WaitForFrame@{WaitForFrame}!ifm3d::FrameGrabber@{ifm3d::FrameGrabber}}
\doxysubsubsection{\texorpdfstring{WaitForFrame()}{WaitForFrame()}}
{\footnotesize\ttfamily std\+::shared\+\_\+future$<$Frame\+::\+Ptr$>$ ifm3d\+::\+Frame\+Grabber\+::\+Wait\+For\+Frame (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Returns a future that will resolve when a new frame is available 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
ifm3d/fg/frame\+\_\+grabber.\+h\end{DoxyCompactItemize}
